"use strict";(self["webpackChunkcxm"]=self["webpackChunkcxm"]||[]).push([[443],{8458:function(e,l,a){a.r(l),a.d(l,{default:function(){return w}});var o=a(3396);const t=e=>((0,o.dD)("data-v-47747004"),e=e(),(0,o.Cn)(),e),r=t((()=>(0,o._)("div",{style:{height:"40px"}},null,-1))),d={class:"dialog-footer"};function u(e,l,a,t,u,n){const m=(0,o.up)("el-table-column"),s=(0,o.up)("el-button"),i=(0,o.up)("el-table"),p=(0,o.up)("el-row"),c=(0,o.up)("el-divider"),f=(0,o.up)("el-input"),w=(0,o.up)("el-form-item"),b=(0,o.up)("el-col"),y=(0,o.up)("el-date-picker"),g=(0,o.up)("el-radio"),h=(0,o.up)("el-radio-group"),_=(0,o.up)("el-form"),W=(0,o.up)("el-dialog"),v=(0,o.up)("el-scrollbar");return(0,o.wg)(),(0,o.j4)(v,null,{default:(0,o.w5)((()=>[r,(0,o.Wm)(p,{justify:"center",align:"middle",style:{padding:"10px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{data:e.customerData,style:{width:"90%"}},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{prop:"Name",label:"客戶姓名"}),(0,o.Wm)(m,{prop:"Plate",label:"車牌號碼"}),(0,o.Wm)(m,{prop:"MStyle",label:"機車型號"}),(0,o.Wm)(m,{prop:"Phone",label:"聯絡電話"}),(0,o.Wm)(m,{align:"right",width:"280"},{header:(0,o.w5)((()=>[(0,o.Wm)(s,{class:"cusBtn",style:{"background-color":"#6D98BA"},onClick:l[0]||(l[0]=l=>e.handleAdd(e.ruleFormRef))},{default:(0,o.w5)((()=>[(0,o.Uk)("新增客戶")])),_:1})])),default:(0,o.w5)((l=>[(0,o.Wm)(s,{class:"cusBtn",style:{"background-color":"#5C9EAD"},onClick:a=>e.handleEdit(l.$index,l.row)},{default:(0,o.w5)((()=>[(0,o.Uk)("編輯")])),_:2},1032,["onClick"]),(0,o.Wm)(s,{class:"cusBtn",style:{"background-color":"#DD6031"},onClick:a=>e.handleRecord(l.$index,l.row)},{default:(0,o.w5)((()=>[(0,o.Uk)("維修紀錄")])),_:2},1032,["onClick"]),(0,o.Wm)(s,{class:"cusBtn",style:{"background-color":"#D16666"},onClick:a=>e.handleDelete(l.$index,l.row)},{default:(0,o.w5)((()=>[(0,o.Uk)("刪除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),(0,o.Wm)(W,{modelValue:e.dialogVisible,"onUpdate:modelValue":l[7]||(l[7]=l=>e.dialogVisible=l),title:e.dialogTitle,width:"70%"},{footer:(0,o.w5)((()=>[(0,o._)("span",d,[(0,o.Wm)(s,{class:"cusBtn2",onClick:l[5]||(l[5]=l=>e.handleSumbit(e.ruleFormRef)),style:{"background-color":"#5C9EAD",color:"#fff"}},{default:(0,o.w5)((()=>[(0,o.Uk)("確認")])),_:1}),(0,o.Wm)(s,{class:"cusBtn2",onClick:l[6]||(l[6]=l=>e.dialogVisible=!1),style:{"background-color":"#D16666",color:"#fff",border:"none"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" 取消 ")])),_:1})])])),default:(0,o.w5)((()=>[(0,o.Wm)(_,{model:e.form,"label-width":"88px",ref:"ruleFormRef","show-message":!1},{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,{"content-position":"left"},{default:(0,o.w5)((()=>[(0,o.Uk)("客戶資料")])),_:1})])),_:1}),(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b,{span:8},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{label:"客戶姓名",prop:"name",required:""},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{modelValue:e.form.name,"onUpdate:modelValue":l[1]||(l[1]=l=>e.form.name=l),placeholder:"要填正確","validate-event":!1},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(b,{span:8},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{label:"出生日期",prop:"birth"},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{modelValue:e.form.birth,"onUpdate:modelValue":l[2]||(l[2]=l=>e.form.birth=l),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(b,{span:8},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{label:"聯絡電話",prop:"phone",required:""},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{modelValue:e.form.phone,"onUpdate:modelValue":l[3]||(l[3]=l=>e.form.phone=l),placeholder:"要填正確"},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(b,{span:8})])),_:1}),(0,o.Wm)(c,{"content-position":"left",style:{margin:"10px 0"}},{default:(0,o.w5)((()=>[(0,o.Uk)("機車資料 ")])),_:1}),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.form.moto,((l,a)=>((0,o.wg)(),(0,o.iD)("div",{key:a},[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b,{span:6},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{label:"車牌",prop:"moto."+a+".plate",required:""},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{modelValue:l.plate,"onUpdate:modelValue":e=>l.plate=e,disabled:l.plate_disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1032,["prop"])])),_:2},1024),(0,o.Wm)(b,{span:6},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{label:"廠牌",prop:"moto."+a+".label"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{modelValue:l.label,"onUpdate:modelValue":e=>l.label=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["prop"])])),_:2},1024),(0,o.Wm)(b,{span:6},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{label:"車型",prop:"moto."+a+".style",required:""},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{modelValue:l.style,"onUpdate:modelValue":e=>l.style=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["prop"])])),_:2},1024),(0,o.Wm)(b,{span:6},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{label:"引擎號碼",prop:"moto."+a+".engine"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{modelValue:l.engine,"onUpdate:modelValue":e=>l.engine=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["prop"])])),_:2},1024)])),_:2},1024),(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b,{span:4},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{label:"顏色",prop:"moto."+a+".color"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{modelValue:l.color,"onUpdate:modelValue":e=>l.color=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["prop"])])),_:2},1024),(0,o.Wm)(b,{span:4},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{label:"排氣量",prop:"moto."+a+".cc"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{modelValue:l.cc,"onUpdate:modelValue":e=>l.cc=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["prop"])])),_:2},1024),(0,o.Wm)(b,{span:6},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{label:"初訪日期",prop:"moto."+a+".first",required:""},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{modelValue:l.first,"onUpdate:modelValue":e=>l.first=e,type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["prop"])])),_:2},1024),(0,o.Wm)(b,{span:4},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{label:"購車",prop:"moto."+a+".buy"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{modelValue:l.buy,"onUpdate:modelValue":e=>l.buy=e,onChange:o=>e.chooseRadio(l.buy,a)},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{label:"N"},{default:(0,o.w5)((()=>[(0,o.Uk)("否")])),_:1}),(0,o.Wm)(g,{label:"Y"},{default:(0,o.w5)((()=>[(0,o.Uk)("是")])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1032,["prop"])])),_:2},1024),(0,o.Wm)(b,{span:6},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{label:"金額",prop:"moto."+a+".dollar"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{modelValue:l.dollar,"onUpdate:modelValue":e=>l.dollar=e,disabled:l.dollar_disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1032,["prop"])])),_:2},1024)])),_:2},1024),(0,o.Wm)(c,{"content-position":"left",style:{margin:"12px 0"}},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{class:"cusBtn2",onClick:l=>e.plusMoto(a),style:{"background-color":"#5C9EAD",color:"#fff",border:"1px #000 solid"},icon:e.Plus,size:"small",circle:""},null,8,["onClick","icon"]),(0,o.Wm)(s,{class:"cusBtn2",onClick:l=>e.minusMoto(a),style:{"background-color":"#D16666",color:"#fff",border:"1px #000 solid"},icon:e.Minus,size:"small",circle:""},null,8,["onClick","icon"])])),_:2},1024)])))),128)),(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b,{span:24},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{label:"備註",class:"noteItem",prop:"note"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{rows:2,type:"textarea",modelValue:e.form.note,"onUpdate:modelValue":l[4]||(l[4]=l=>e.form.note=l)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"])])),_:1})}a(7658);var n=a(4870),m=a(2748),s=a(3602),i=a(678),p=(0,o.aZ)({components:{},setup(){const e=(0,i.tv)(),l=(0,n.iH)([]),a=(0,n.iH)(!1),t=(0,n.iH)(""),r=(0,n.iH)(),d=(0,n.qj)({name:"",birth:"",phone:"",note:"",moto:[{plate:"",first:"",label:"",style:"",color:"",engine:"",cc:"",buy:"N",dollar:"",dollar_disabled:!0,plate_disabled:!1}]});(0,o.bv)((async()=>{await u(),console.log("customerData",l.value)}));const u=()=>{let e=[];s.Z.post("/getCustomer",{}).then((a=>{console.log(a),l.value=a.data,l.value.forEach((l=>{l.Plate=l.allPlate.join(","),e=[],l.allPlate.forEach((a=>{e.push(l.Moto.find((e=>a===e.plate))?.style)})),l.MStyle=e.join(",")}))}))},p=(e,l)=>{d.moto[l].dollar_disabled="Y"!==e},c=e=>{a.value=!0,t.value="新增客戶",d.name="",d.birth="",d.phone="",d.note="",d.moto=[{plate:"",first:"",label:"",style:"",color:"",engine:"",cc:"",buy:"N",dollar:"",dollar_disabled:!0,plate_disabled:!1}]},f=(e,l)=>{a.value=!0,t.value="編輯客戶",d.name=l.Name,d.birth=l.Birth,d.phone=l.Phone,d.moto=l.Moto,r.value?.validate((e=>{if(!e)return console.log("error submit!"),!1;console.log("submit!")}))},w=(l,a)=>{e.push({name:"record",params:{plate:a.Plate,infoData:[a.Name,0]}})},b=(e,l)=>{console.log("delete Customer===>"+l),s.Z.post("/deleteCustomer",{moto:l.Moto}).then((async e=>{console.log(e),await u()}))},y=e=>{e&&e.validate((e=>{if(!e)return console.log("error submit!"),!1;console.log("submit!"),s.Z.post("/updateCustomer",{name:d.name,birth:d.birth,phone:d.phone,note:d.note,moto:d.moto}).then((async e=>{console.log(e),await u(),a.value=!1})).catch((e=>{console.log(e)}))}))},g=e=>{const l={plate:"",first:"",label:"",style:"",color:"",engine:"",cc:"",buy:"N",dollar:"",dollar_disabled:!0,plate_disabled:!1};d.moto.splice(e+1,0,l)},h=e=>{d.moto.length>1&&d.moto.splice(e,1)},_=e=>{e&&e.resetFields()};return{customerData:l,dialogVisible:a,dialogTitle:t,form:d,ruleFormRef:r,resetForm:_,chooseRadio:p,handleAdd:c,handleEdit:f,handleRecord:w,handleDelete:b,handleSumbit:y,plusMoto:g,minusMoto:h,Plus:m.v37,Minus:m.WF_}}}),c=a(89);const f=(0,c.Z)(p,[["render",u],["__scopeId","data-v-47747004"]]);var w=f},4928:function(e,l,a){a.r(l),a.d(l,{default:function(){return b}});var o=a(3396);const t={class:"dialog-footer"};function r(e,l,a,r,d,u){const n=(0,o.up)("el-table-column"),m=(0,o.up)("el-button"),s=(0,o.up)("el-table"),i=(0,o.up)("el-input"),p=(0,o.up)("el-form-item"),c=(0,o.up)("el-col"),f=(0,o.up)("el-date-picker"),w=(0,o.up)("el-row"),b=(0,o.up)("el-option"),y=(0,o.up)("el-select"),g=(0,o.up)("el-form"),h=(0,o.up)("el-dialog");return(0,o.wg)(),(0,o.j4)(w,{justify:"center",align:"middle",style:{padding:"20px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{data:e.employeeData,style:{width:"90%"}},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{prop:"NAME",label:"姓名"}),(0,o.Wm)(n,{prop:"PHONE",label:"手機"}),(0,o.Wm)(n,{prop:"ACC",label:"帳號"}),(0,o.Wm)(n,{prop:"BIRTH",label:"生日"}),(0,o.Wm)(n,{prop:"ROLE",label:"職等"}),(0,o.Wm)(n,{prop:"DATE",label:"入職日期"}),(0,o.Wm)(n,{align:"right",width:"280"},{header:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"empBtn",onClick:l[0]||(l[0]=l=>e.handleAdd()),style:{"background-color":"#6D98BA"}},{default:(0,o.w5)((()=>[(0,o.Uk)("新增員工")])),_:1})])),default:(0,o.w5)((l=>[(0,o.Wm)(m,{class:"empBtn",onClick:a=>e.handleEdit(l.$index,l.row),style:{"background-color":"#5C9EAD"}},{default:(0,o.w5)((()=>[(0,o.Uk)("編輯")])),_:2},1032,["onClick"]),(0,o.Wm)(m,{class:"empBtn",onClick:a=>e.handleDelete(l.$index,l.row),style:{"background-color":"#D16666"}},{default:(0,o.w5)((()=>[(0,o.Uk)("刪除")])),_:2},1032,["onClick"]),(0,o.Wm)(m,{class:"empBtn",onClick:a=>e.handleReset(l.$index,l.row),style:{"background-color":"#DD6031"}},{default:(0,o.w5)((()=>[(0,o.Uk)("修改密碼")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,o.Wm)(h,{modelValue:e.dialogVisible,"onUpdate:modelValue":l[12]||(l[12]=l=>e.dialogVisible=l),title:e.dialogTitle,width:"70%"},{footer:(0,o.w5)((()=>[(0,o._)("span",t,[(0,o.Wm)(m,{class:"empBtn",onClick:l[10]||(l[10]=l=>e.handleSumbit(e.ruleFormRef)),style:{"background-color":"#5C9EAD",color:"#fff"}},{default:(0,o.w5)((()=>[(0,o.Uk)("確認")])),_:1}),(0,o.Wm)(m,{class:"empBtn",onClick:l[11]||(l[11]=l=>e.dialogVisible=!1),style:{"background-color":"#D16666",color:"#fff"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" 取消 ")])),_:1})])])),default:(0,o.w5)((()=>[(0,o.Wm)(g,{model:e.form,rules:e.rules,"label-width":"88px",ref:"ruleFormRef","show-message":!1},{default:(0,o.w5)((()=>["修改密碼"!==e.dialogTitle?((0,o.wg)(),(0,o.j4)(w,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{span:8},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{label:"員工姓名",prop:"name",required:""},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{modelValue:e.form.name,"onUpdate:modelValue":l[1]||(l[1]=l=>e.form.name=l),placeholder:"要填正確","validate-event":!1},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(c,{span:8},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{label:"聯絡電話",prop:"phone",required:""},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{modelValue:e.form.phone,"onUpdate:modelValue":l[2]||(l[2]=l=>e.form.phone=l),placeholder:"要填正確","validate-event":!1},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(c,{span:8},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{label:"出生日期",prop:"birth",required:""},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{modelValue:e.form.birth,"onUpdate:modelValue":l[3]||(l[3]=l=>e.form.birth=l),type:"date",format:"YYYY-MM-DD","value-format":"YYYYMMDD"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})):(0,o.kq)("",!0),"修改密碼"!==e.dialogTitle?((0,o.wg)(),(0,o.j4)(w,{key:1},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{span:8},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{label:"員工帳號",prop:"acc",required:""},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{modelValue:e.form.acc,"onUpdate:modelValue":l[4]||(l[4]=l=>e.form.acc=l),placeholder:"要填正確","validate-event":!1,disabled:"編輯員工"==e.dialogTitle},null,8,["modelValue","disabled"])])),_:1})])),_:1}),(0,o.Wm)(c,{span:8},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{label:"角色",prop:"role",required:""},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{modelValue:e.form.role,"onUpdate:modelValue":l[5]||(l[5]=l=>e.form.role=l)},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.roleOpt,(e=>((0,o.wg)(),(0,o.j4)(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(c,{span:8},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{label:"入職日期",prop:"date",required:""},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{modelValue:e.form.date,"onUpdate:modelValue":l[6]||(l[6]=l=>e.form.date=l),type:"date",format:"YYYY-MM-DD","value-format":"YYYYMMDD"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})):(0,o.kq)("",!0),"修改密碼"==e.dialogTitle?((0,o.wg)(),(0,o.j4)(w,{key:2},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{span:8},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{label:"原始密碼",prop:"pass1",required:""},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{modelValue:e.form.pass1,"onUpdate:modelValue":l[7]||(l[7]=l=>e.form.pass1=l),placeholder:"要填正確",type:"password"},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(c,{span:8},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{label:"修改密碼",prop:"pass2",required:""},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{modelValue:e.form.pass2,"onUpdate:modelValue":l[8]||(l[8]=l=>e.form.pass2=l),placeholder:"要填正確",type:"password","validate-event":!1},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(c,{span:8},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{label:"確認密碼",prop:"pass3",required:""},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{modelValue:e.form.pass3,"onUpdate:modelValue":l[9]||(l[9]=l=>e.form.pass3=l),placeholder:"要填正確",type:"password","validate-event":!1},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})):(0,o.kq)("",!0)])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])),_:1})}var d=a(4870),u=a(65),n=a(678),m=a(3602),s=a(8958),i=a.n(s),p=a(7178),c=(0,o.aZ)({setup(){(0,u.oR)(),(0,n.tv)(),(0,n.yj)();const e=(0,d.iH)([]),l=(0,d.iH)(!1),a=(0,d.iH)(""),t=(0,d.iH)(),r=(0,d.iH)([]),s=new Date;let c=s.getDate()<10?"0"+s.getDate():s.getDate(),f=s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1,w=s.getFullYear(),b=`${w}${f}${c}`;const y=(0,d.qj)({name:"",acc:"",pass1:"",pass2:"",pass3:"",birth:"",phone:"",date:"",role:""}),g=(e,l,a)=>{""===l?a(new Error("不得為空")):m.Z.post("/checkPass",{pass:y.pass1,acc:y.acc}).then((e=>{i().compareSync(y.pass1,e.Pass)?a():((0,p.z8)({message:"原始密碼錯誤",type:"error"}),a(new Error("原始密碼錯誤")))})).catch((e=>{console.log(e)}))},h=(0,d.qj)({pass1:[{validator:g,trigger:"blur"}]});(0,o.bv)((async()=>{await _(),await W()}));const _=()=>{m.Z.post("/getEmployee",{}).then((l=>{console.log("employee",l.data),e.value=l.data})).catch((e=>{console.log(e)}))},W=()=>{m.Z.post("/getRole",{}).then((e=>{console.log("getRole",e.data),r.value=e.roleOpt})).catch((e=>{console.log(e)}))},v=()=>{a.value="新增員工",l.value=!0,y.name="",y.acc="",y.birth="",y.phone="",y.date=b,y.role="L02"},k=(e,o)=>{a.value="編輯員工",l.value=!0,y.name=o.NAME,y.acc=o.ACC,y.birth=o.BIRTH,y.phone=o.PHONE,y.date=o.DATE,y.role=o.ROLE},V=(e,o)=>{a.value="刪除",m.Z.post("/delEmployee",{name:y.name,birth:y.birth,acc:y.acc,phone:y.phone,date:y.date,role:y.role}).then((async e=>{console.log(e),"1"==e.result&&(await _(),l.value=!1),T(e.result)})).catch((e=>{console.log(e)}))},D=(e,o)=>{a.value="修改密碼",l.value=!0,y.acc=o.ACC,y.name=o.NAME,y.phone=o.PHONE,y.pass1="",y.pass2="",y.pass3=""},C=e=>{e&&e.validate((e=>{if(!e)return console.log("error submit!"),!1;if("修改密碼"==a.value){if(y.pass2===y.pass3){const e=i().genSaltSync(10),a=i().hashSync(y.pass2,e);m.Z.post("/passReset",{name:y.name,acc:y.acc,phone:y.phone,pass:a}).then((async e=>{console.log(e),"1"==e.result&&(await _(),l.value=!1),T(e.result)})).catch((e=>{console.log(e)}))}}else if("新增員工"==a.value){const e=i().genSaltSync(10),a=i().hashSync("123",e);m.Z.post("/addEmployee",{name:y.name,acc:y.acc,birth:y.birth,phone:y.phone,date:y.date,role:y.role,pass:a}).then((async e=>{console.log(e),"1"==e.result&&(await _(),l.value=!1),T(e.result)})).catch((e=>{console.log(e)}))}else"編輯員工"==a.value&&m.Z.post("/editEmployee",{name:y.name,birth:y.birth,acc:y.acc,phone:y.phone,date:y.date,role:y.role}).then((async e=>{console.log(e),"1"==e.result&&(await _(),l.value=!1),T(e.result)})).catch((e=>{console.log(e)}))}))},T=e=>{console.log("showMess",e),"0"==e?(0,p.z8)({message:a.value.substring(0,2)+"失敗",type:"error"}):"1"==e?(0,p.z8)({message:a.value.substring(0,2)+"成功",type:"success"}):"2"==e&&(0,p.z8)({message:"帳號重複",type:"error"})};return{handleAdd:v,handleEdit:k,handleDelete:V,handleReset:D,handleSumbit:C,showMess:T,employeeData:e,dialogVisible:l,dialogTitle:a,form:y,ruleFormRef:t,roleOpt:r,rules:h}}}),f=a(89);const w=(0,f.Z)(c,[["render",r],["__scopeId","data-v-3952f071"]]);var b=w},2860:function(e,l,a){a.r(l),a.d(l,{default:function(){return s}});var o=a(3396);function t(e,l,a,t,r,d){return(0,o.wg)(),(0,o.iD)("div",null,"財務管理")}var r=a(65),d=a(678),u=(0,o.aZ)({setup(){(0,r.oR)(),(0,d.tv)(),(0,d.yj)();return{}}}),n=a(89);const m=(0,n.Z)(u,[["render",t]]);var s=m},2941:function(e,l,a){a.r(l),a.d(l,{default:function(){return w}});var o=a(3396),t=a(7139);function r(e,l,a,r,d,u){const n=(0,o.up)("el-option"),m=(0,o.up)("el-select"),s=(0,o.up)("el-form-item"),i=(0,o.up)("el-col"),p=(0,o.up)("el-input"),c=(0,o.up)("el-button"),f=(0,o.up)("el-row"),w=(0,o.up)("el-table-column"),b=(0,o.up)("el-table"),y=(0,o.up)("el-form");return(0,o.wg)(),(0,o.j4)(y,{model:e.form,ref:"ruleFormRef","show-message":!1},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{justify:"center",style:{"padding-top":"20px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{span:5},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{label:"項目類別",required:"",prop:"item_type"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{modelValue:e.form.item_type,"onUpdate:modelValue":l[0]||(l[0]=l=>e.form.item_type=l),onChange:e.getItem,filterable:"","allow-create":""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.optType,(e=>((0,o.wg)(),(0,o.j4)(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1})])),_:1}),(0,o.Wm)(i,{span:5},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{label:"項目",required:"",prop:"item"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{modelValue:e.form.item,"onUpdate:modelValue":l[1]||(l[1]=l=>e.form.item=l),filterable:"","allow-create":"",onChange:l[2]||(l[2]=l=>e.filterItem(e.form.item_type,e.form.item))},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.optItem,(e=>((0,o.wg)(),(0,o.j4)(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(i,{span:3},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{label:"售價",required:"",prop:"item_price"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{modelValue:e.form.item_price,"onUpdate:modelValue":l[3]||(l[3]=l=>e.form.item_price=l)},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(i,{span:3,offset:1},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{label:"成本",required:"",prop:"item_cost"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{modelValue:e.form.item_cost,"onUpdate:modelValue":l[4]||(l[4]=l=>e.form.item_cost=l)},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(i,{span:2},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{icon:e.Plus,onClick:l[5]||(l[5]=l=>e.handleSumbit(e.ruleFormRef)),circle:""},null,8,["icon"])])),_:1})])),_:1}),(0,o.Wm)(f,{justify:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{span:20},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{data:e.fixDataFilter},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{prop:"ITEM_TYPE",label:"項目類別"}),(0,o.Wm)(w,{prop:"ITEM",label:"項目"}),(0,o.Wm)(w,{prop:"ITEM_PRICE",label:"售價",width:"200"}),(0,o.Wm)(w,{label:"成本",width:"180"},{header:(0,o.w5)((()=>[(0,o.Wm)(c,{icon:"Hide"===e.showCostText?e.Hide:e.View,style:{border:"none"},onClick:e.showCost},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)("Hide"===e.showCostText?"顯示成本":"隱藏成本"),1)])),_:1},8,["icon","onClick"])])),default:(0,o.w5)((l=>[(0,o.Uk)((0,t.zw)("Hide"===e.showCostText?"---":l.row.ITEM_COST),1)])),_:1}),(0,o.Wm)(w,{align:"right",width:"80"},{default:(0,o.w5)((l=>[(0,o.Wm)(c,{class:"fixBtn",onClick:a=>e.handleDelete(l.row),circle:"",icon:e.Close},null,8,["onClick","icon"])])),_:1})])),_:1},8,["data"])])),_:1})])),_:1})])),_:1},8,["model"])}var d=a(4870),u=a(65),n=a(678),m=a(3602),s=a(2748),i=a(7178),p=(0,o.aZ)({setup(){const e=(0,d.iH)(),l=((0,u.oR)(),(0,n.tv)(),(0,n.yj)(),(0,d.qj)({item_type:"",item:"",item_price:"",item_cost:""})),a=(0,d.iH)([]),t=(0,d.iH)([{label:"全部",value:""}]),r=(0,d.iH)([]),p=(0,d.iH)([]);(0,o.bv)((async()=>{await c(),await f()}));const c=()=>{m.Z.post("/getFixData",{}).then((async e=>{r.value=e.fixData,p.value=r.value})).catch((e=>{console.log(e)}))},f=()=>{m.Z.post("/getFixType",{}).then((async e=>{a.value=[{label:"全部",value:""}],a.value=a.value.concat(e.optType),l.item=""})).catch((e=>{console.log(e)}))},w=e=>{console.log("type change"),p.value=r.value.filter((l=>""!==e?l.ITEM_TYPE===e:p.value=r.value)),""==e?(t.value=[{label:"全部",value:""}],l.item=""):m.Z.post("/getFixItem",{item_type:e}).then((async e=>{t.value=[],t.value=[{label:"全部",value:""}],t.value=t.value.concat(e.optItem)})).catch((e=>{console.log(e)}))},b=(e,l)=>{console.log("item change"),p.value=r.value.filter((a=>""!==e&&""!==l?a.ITEM_TYPE===e&&a.ITEM===l:""!==e&&""==l?a.ITEM_TYPE===e:""==e&&""!==l?a.ITEM===l:""==e&&""==l?p.value=r.value:void 0))},y=e=>{e&&e.validate((e=>{if(!e)return console.log("error submit!"),!1;console.log("submit!"),m.Z.post("/updateFix",{item_type:l.item_type,item:l.item,item_price:l.item_price,item_cost:l.item_cost}).then((async e=>{(0,i.z8)({message:e.mess,type:"1"===e.type?"success":"error"}),await c(),l.item_type="",l.item="",l.item_price="",l.item_cost="",await b(l.item_type,l.item),await f(),await w(l.item_type)})).catch((e=>{console.log(e)}))}))},g=e=>{m.Z.post("/delFix",{item_type:e.ITEM_TYPE,item:e.ITEM,item_price:e.ITEM_PRICE,item_cost:e.ITEM_COST}).then((async e=>{(0,i.z8)({message:e.mess,type:e.res>0?"success":"error"}),await c()})).catch((e=>{console.log(e)}))},h=(0,d.iH)("Hide"),_=()=>{h.value="Hide"===h.value?"View":"Hide"};return{showCost:_,showCostText:h,form:l,Plus:s.v37,Close:s.x8P,Hide:s.caK,View:s.G7x,optType:a,optItem:t,ruleFormRef:e,handleSumbit:y,handleDelete:g,getItem:w,fixData:r,fixDataFilter:p,filterItem:b}}}),c=a(89);const f=(0,c.Z)(p,[["render",r],["__scopeId","data-v-ce2ce586"]]);var w=f},3378:function(e,l,a){a.r(l),a.d(l,{default:function(){return w}});var o=a(3396);const t={key:0},r={class:"dialog-footer"};function d(e,l,a,d,u,n){const m=(0,o.up)("el-table-column"),s=(0,o.up)("el-button"),i=(0,o.up)("el-table"),p=(0,o.up)("el-date-picker"),c=(0,o.up)("el-form-item"),f=(0,o.up)("el-input"),w=(0,o.up)("el-form"),b=(0,o.up)("el-dialog"),y=(0,o.up)("el-tab-pane"),g=(0,o.up)("el-tabs");return(0,o.wg)(),(0,o.j4)(g,{modelValue:e.activeName,"onUpdate:modelValue":l[7]||(l[7]=l=>e.activeName=l),class:"plate-tabs",onTabChange:e.handleTabChange},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.ayPlate,(a=>((0,o.wg)(),(0,o.j4)(y,{key:a,label:a,name:a},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{data:e.recordData,border:""},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{prop:"RDate",label:"日期"}),(0,o.Wm)(m,{prop:"",label:"維修類別"}),(0,o.Wm)(m,{prop:"KM",label:"累積里程"}),(0,o.Wm)(m,{prop:"payOff",label:"結清"}),(0,o.Wm)(m,{align:"right",width:"280"},{header:(0,o.w5)((()=>[(0,o.Wm)(s,{class:"RecBtn",style:{"background-color":"#6D98BA"},onClick:l[0]||(l[0]=l=>e.handleAdd())},{default:(0,o.w5)((()=>[(0,o.Uk)("新增紀錄")])),_:1}),(0,o.Wm)(s,{class:"RecBtn",style:{"background-color":"#8a8a8a"},onClick:l[1]||(l[1]=l=>e.handleKm(e.nowTab))},{default:(0,o.w5)((()=>[(0,o.Uk)("新增里程")])),_:1})])),default:(0,o.w5)((l=>[(0,o.Wm)(s,{class:"RecBtn",style:{"background-color":"#5C9EAD"},onClick:a=>e.handleEdit(l.$index,l.row)},{default:(0,o.w5)((()=>[(0,o.Uk)("編輯")])),_:2},1032,["onClick"]),(0,o.Wm)(s,{class:"RecBtn",style:{"background-color":"#DD6031"},onClick:a=>e.handleCheck(l.$index,l.row)},{default:(0,o.w5)((()=>[(0,o.Uk)("查看")])),_:2},1032,["onClick"]),(0,o.Wm)(s,{class:"RecBtn",style:{"background-color":"#D16666"},onClick:a=>e.handleDelete(l.$index,l.row)},{default:(0,o.w5)((()=>[(0,o.Uk)("刪除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,o.Wm)(b,{modelValue:e.dialogVisible,"onUpdate:modelValue":l[6]||(l[6]=l=>e.dialogVisible=l),title:e.dialogTitle,width:"30%"},{footer:(0,o.w5)((()=>[(0,o._)("span",r,[(0,o.Wm)(s,{class:"RecBtn",onClick:l[4]||(l[4]=l=>e.handleSumbit()),style:{"background-color":"#5C9EAD",color:"#fff"}},{default:(0,o.w5)((()=>[(0,o.Uk)("確認")])),_:1}),(0,o.Wm)(s,{class:"RecBtn",onClick:l[5]||(l[5]=l=>e.dialogVisible=!1),style:{"background-color":"#D16666",color:"#fff"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" 取消 ")])),_:1})])])),default:(0,o.w5)((()=>[(0,o.Wm)(w,{model:e.form,ref_for:!0,ref:"ruleFormRef2","show-message":!1},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{label:"選擇日期",prop:"date",required:""},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{modelValue:e.form.recordDate,"onUpdate:modelValue":l[2]||(l[2]=l=>e.form.recordDate=l),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1}),"新增里程"===e.dialogTitle?((0,o.wg)(),(0,o.iD)("div",t,[(0,o.Wm)(c,{label:"新增里程",prop:"km",required:"新增里程"===e.dialogTitle},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{modelValue:e.form.km,"onUpdate:modelValue":l[3]||(l[3]=l=>e.form.km=l),style:{width:"67.5%"}},null,8,["modelValue"])])),_:1},8,["required"]),(e.dialogTitle="新增里程")?((0,o.wg)(),(0,o.j4)(i,{key:0,data:e.kmData,class:"kmTable"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{prop:"kmDate",label:"日期"}),(0,o.Wm)(m,{prop:"km",label:"公里數"}),(0,o.Wm)(m,{align:"right",width:"70"},{default:(0,o.w5)((l=>[(0,o.Wm)(s,{icon:e.CloseBold,circle:"",class:"kmDel",size:"small",onClick:a=>e.handleDeleteKm(l.$index,l.row)},null,8,["icon","onClick"])])),_:1})])),_:1},8,["data"])):(0,o.kq)("",!0)])):(0,o.kq)("",!0)])),_:1},8,["model"])])),_:1},8,["modelValue","title"])])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue","onTabChange"])}a(7658);var u=a(4870),n=a(65),m=a(2748),s=a(678),i=a(3602),p=(0,o.aZ)({setup(){(0,n.oR)();const e=(0,s.tv)(),l=(0,s.yj)(),a=(0,u.iH)([]),t=(0,u.iH)(""),r=(0,u.iH)([]),d=(0,u.iH)([]),p=new Date;let c=p.getDate(),f=p.getMonth()+1,w=p.getFullYear(),b=`${w}-${f}-${c}`;const y=(0,u.qj)({recordDate:b,km:""}),g=(0,u.iH)(),h=(0,u.iH)(!1),_=(0,u.iH)(""),W=(0,u.iH)("");(0,o.bv)((()=>{console.log("RecordView==>",l.params.plate),a.value=l.params.plate.split(","),t.value=a.value[0]}));const v=e=>{i.Z.post("/getRecord",{plate:e}).then((e=>{console.log(e),r.value=e.data,r.value.filter((e=>{const l=e.PAYLIST.split(","),a=l.some((e=>"否"===e||"NO"===e||"N"===e||"No"===e));e.payOff=a?"否":"是"}))}))},k=async e=>{console.log("handleTabChange===>",e),W.value=e,await v(e)},V=e=>{i.Z.post("/getKm",{plate:e}).then((e=>{console.log(e),d.value=e.data}))},D=async e=>{h.value=!0,_.value="新增里程",await V(W.value)},C=()=>{h.value=!0,_.value="新增紀錄"},T=(a,o)=>{e.push({name:"updateRecord",params:{type:"edit",plate:o.RPlate,recordDate:o.RDate,infoData:[l.params.infoData[0],o.RDate]}})},U=(a,o)=>{e.push({name:"updateRecord",params:{type:"check",plate:o.RPlate,recordDate:o.RDate,infoData:[l.params.infoData[0],o.RDate]}})},E=(e,l)=>{},x=()=>{"新增紀錄"===_.value?e.push({name:"updateRecord",params:{type:"edit",plate:W.value,recordDate:y.recordDate,infoData:[l.params.infoData[0],y.recordDate]}}):"新增里程"===_.value&&""!=y.recordDate&&""!=y.km&&""!=W.value&&i.Z.post("/addKm",{kmDate:y.recordDate,km:y.km,plate:W.value}).then((e=>{V(W.value)})).catch((e=>{console.log(e)}))},Y=(e,l)=>{i.Z.post("/delKm",{kmDate:l.kmDate,km:l.km,plate:l.plate}).then((e=>{V(l.plate)})).catch((e=>{console.log(e)}))};return{handleDeleteKm:Y,handleSumbit:x,recordData:r,ayPlate:a,nowTab:W,handleKm:D,handleTabChange:k,activeName:t,handleAdd:C,handleEdit:T,handleCheck:U,handleDelete:E,form:y,dialogTitle:_,dialogVisible:h,ruleFormRef2:g,kmData:d,CloseBold:m.q6s}}}),c=a(89);const f=(0,c.Z)(p,[["render",d],["__scopeId","data-v-683fb60f"]]);var w=f},9718:function(e,l,a){a.r(l),a.d(l,{default:function(){return s}});var o=a(3396);function t(e,l,a,t,r,d){return(0,o.wg)(),(0,o.iD)("div",null,"庫存管理")}var r=a(65),d=a(678),u=(0,o.aZ)({setup(){(0,r.oR)(),(0,d.tv)(),(0,d.yj)();return{}}}),n=a(89);const m=(0,n.Z)(u,[["render",t]]);var s=m},7822:function(e,l,a){a.r(l),a.d(l,{default:function(){return v}});var o=a(3396),t=a(7139);const r=e=>((0,o.dD)("data-v-61f204f3"),e=e(),(0,o.Cn)(),e),d={key:1},u={key:1},n={style:{display:"flex","justify-content":"center"}},m=r((()=>(0,o._)("br",null,null,-1))),s={key:1},i={key:1};function p(e,l,a,r,p,c){const f=(0,o.up)("el-button"),w=(0,o.up)("el-col"),b=(0,o.up)("el-option"),y=(0,o.up)("el-select"),g=(0,o.up)("el-form-item"),h=(0,o.up)("el-input"),_=(0,o.up)("el-row"),W=(0,o.up)("el-popover"),v=(0,o.up)("el-table-column"),k=(0,o.up)("el-table"),V=(0,o.up)("el-form");return(0,o.wg)(),(0,o.j4)(V,{model:e.form,ref:"ruleFormRef","show-message":!1},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{style:{padding:"10px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{span:1},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{icon:e.Back,onClick:e.back,style:{"background-color":"transparent",border:"none","font-size":"18px"}},null,8,["icon","onClick"])])),_:1}),(0,o.Wm)(w,{span:4},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{label:"維修人員",required:""},{default:(0,o.w5)((()=>["edit"===e.recordType?((0,o.wg)(),(0,o.j4)(y,{key:0,modelValue:e.form.employee,"onUpdate:modelValue":l[0]||(l[0]=l=>e.form.employee=l)},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.employeeOpt,(e=>((0,o.wg)(),(0,o.j4)(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):((0,o.wg)(),(0,o.iD)("span",d,"："+(0,t.zw)(e.form.employee),1))])),_:1})])),_:1}),(0,o.Wm)(w,{offset:1,span:4},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{label:"維修類別",required:""},{default:(0,o.w5)((()=>["edit"===e.recordType?((0,o.wg)(),(0,o.j4)(y,{key:0,modelValue:e.form.fixType,"onUpdate:modelValue":l[1]||(l[1]=l=>e.form.fixType=l),"allow-create":"",filterable:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.fixTypeOpt,(e=>((0,o.wg)(),(0,o.j4)(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):((0,o.wg)(),(0,o.iD)("span",u,"："+(0,t.zw)(e.form.fixType),1))])),_:1})])),_:1}),"edit"===e.recordType?((0,o.wg)(),(0,o.j4)(w,{key:0,offset:12,span:2},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{visible:e.visible,placement:"right-start",width:250},{reference:(0,o.w5)((()=>[(0,o.Wm)(f,{onClick:l[4]||(l[4]=l=>e.visible=!0)},{default:(0,o.w5)((()=>[(0,o.Uk)("註記")])),_:1})])),default:(0,o.w5)((()=>[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h,{modelValue:e.form.note,"onUpdate:modelValue":l[2]||(l[2]=l=>e.form.note=l),placeholder:"輸入註記"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(_,{justify:"end",style:{margin:"5px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{size:"small",onClick:l[3]||(l[3]=l=>e.visible=!1),style:{"background-color":"#5C9EAD",color:"#fff"}},{default:(0,o.w5)((()=>[(0,o.Uk)("confirm")])),_:1})])),_:1})])),_:1},8,["visible"])])),_:1})):(0,o.kq)("",!0),"check"===e.recordType?((0,o.wg)(),(0,o.j4)(w,{key:1,offset:10,span:2},{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o.Uk)("PDF")])),_:1})])),_:1})):(0,o.kq)("",!0),"check"===e.recordType?((0,o.wg)(),(0,o.j4)(w,{key:2,span:2},{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o.Uk)("EXCEL")])),_:1})])),_:1})):(0,o.kq)("",!0)])),_:1}),"edit"===e.recordType?((0,o.wg)(),(0,o.j4)(_,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{offset:1,span:4},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{label:"項目類別",class:"recordForm"},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{modelValue:e.form.itemType,"onUpdate:modelValue":l[5]||(l[5]=l=>e.form.itemType=l),filterable:"","allow-create":"",onChange:l[6]||(l[6]=l=>e.getItem(e.form.itemType))},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.itemTypeOpt,(e=>((0,o.wg)(),(0,o.j4)(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(w,{span:4},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{label:"項目",class:"recordForm",required:"",prop:"item"},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{modelValue:e.form.item,"onUpdate:modelValue":l[7]||(l[7]=l=>e.form.item=l),filterable:"","allow-create":""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.itemOpt,(l=>((0,o.wg)(),(0,o.j4)(b,{key:l.value,label:l.label,value:l.value,onClick:a=>e.getPrice(l.price)},null,8,["label","value","onClick"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(w,{span:3},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{label:"單價",class:"recordForm",required:"",prop:"price"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{modelValue:e.form.price,"onUpdate:modelValue":l[8]||(l[8]=l=>e.form.price=l),style:{width:"70%"}},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(w,{span:3},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{label:"數量",class:"recordForm",required:"",prop:"amount"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{modelValue:e.form.amount,"onUpdate:modelValue":l[9]||(l[9]=l=>e.form.amount=l),style:{width:"70%"}},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(w,{span:3},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{label:"工資",class:"recordForm",required:"",prop:"salary"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{modelValue:e.form.salary,"onUpdate:modelValue":l[10]||(l[10]=l=>e.form.salary=l),style:{width:"70%"}},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(w,{span:4},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{label:"小計",class:"recordForm",required:"",prop:"total"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{modelValue:e.form.total,"onUpdate:modelValue":l[11]||(l[11]=l=>e.form.total=l),style:{width:"80%"}},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(w,{span:1,style:{display:"flex","justify-content":"center"}},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{label:"",class:"recordForm",required:""},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{class:"addRecordBtn",icon:e.Plus,circle:"",style:{"background-color":"#5C9EAD",color:"#fff"},onClick:l[12]||(l[12]=l=>e.addRecord(e.ruleFormRef))},null,8,["icon"])])),_:1})])),_:1})])),_:1})):(0,o.kq)("",!0),(0,o._)("div",n,[(0,o.Wm)(k,{data:e.recordData,style:{width:"91.5%"},class:"recordTable",height:"edit"===e.recordType?"350":"420"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{label:"編號",type:"index",width:"80"}),(0,o.Wm)(v,{prop:"Item",label:"維修項目",width:"400"}),(0,o.Wm)(v,{prop:"Price",label:"單價"}),(0,o.Wm)(v,{prop:"Quantity",label:"數量"}),(0,o.Wm)(v,{prop:"Salary",label:"工資"}),(0,o.Wm)(v,{prop:"Dollar",label:"小計"}),"edit"===e.recordType?((0,o.wg)(),(0,o.j4)(v,{key:0,align:"right",width:"100"},{default:(0,o.w5)((l=>[(0,o.Wm)(f,{class:"recDel",style:{"background-color":"#D16666"},onClick:a=>e.handleDelete(l.$index,l.row),icon:e.Close,circle:"",size:"small"},null,8,["onClick","icon"])])),_:1})):(0,o.kq)("",!0)])),_:1},8,["data","height"])]),m,(0,o.Wm)(_,{justify:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{span:"edit"===e.recordType?20:22},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{data:e.recordSum,style:{width:"100%"},class:"recordSum","cell-class-name":e.cellClass,border:""},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{prop:"total",label:"小計(+)"}),(0,o.Wm)(v,{prop:"discount",label:"折扣(-)"},{default:(0,o.w5)((a=>["edit"===e.recordType?((0,o.wg)(),(0,o.j4)(h,{key:0,modelValue:e.form.discount,"onUpdate:modelValue":l[13]||(l[13]=l=>e.form.discount=l)},null,8,["modelValue"])):((0,o.wg)(),(0,o.iD)("span",s,(0,t.zw)(e.form.discount),1))])),_:1}),(0,o.Wm)(v,{prop:"salary_sum",label:"工資(+)"}),(0,o.Wm)(v,{prop:"sum",label:"總額(=)"}),(0,o.Wm)(v,{prop:"payOff",label:"已收"},{default:(0,o.w5)((a=>["edit"===e.recordType?((0,o.wg)(),(0,o.j4)(h,{key:0,modelValue:e.form.payOff,"onUpdate:modelValue":l[14]||(l[14]=l=>e.form.payOff=l)},null,8,["modelValue"])):((0,o.wg)(),(0,o.iD)("span",i,(0,t.zw)(e.form.payOff),1))])),_:1}),(0,o.Wm)(v,{prop:"notPay",label:"未收"})])),_:1},8,["data","cell-class-name"])])),_:1},8,["span"]),"edit"===e.recordType?((0,o.wg)(),(0,o.j4)(w,{key:0,span:2,style:{display:"flex","justify-content":"center","align-items":"center"}},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{icon:e.Check,round:"",style:{"background-color":"#5C9EAD",color:"#fff"},onClick:l[15]||(l[15]=l=>e.saveNote())},{default:(0,o.w5)((()=>[(0,o.Uk)(" 儲存 ")])),_:1},8,["icon"])])),_:1})):(0,o.kq)("",!0)])),_:1}),"check"===e.recordType?((0,o.wg)(),(0,o.j4)(_,{key:1,justify:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{span:22,style:{"text-align":"left"}},{default:(0,o.w5)((()=>[(0,o._)("p",null,[(0,o.Uk)("註記："),(0,o._)("span",null,(0,t.zw)(e.form.note),1)])])),_:1})])),_:1})):(0,o.kq)("",!0)])),_:1},8,["model"])}var c=a(4870),f=a(65),w=a(678),b=a(3602),y=a(2748),g=a(6e3),h=(0,o.aZ)({setup(){(0,f.oR)(),(0,w.tv)();const e=(0,w.yj)(),l=(0,c.iH)(),a=(0,c.iH)([]),t=(0,c.iH)([]),r=(0,c.iH)([]),d=(0,c.iH)([]),u=(0,c.iH)(""),n=(0,c.iH)([]),m=(0,c.iH)(!1),s=(0,c.qj)({fixType:"",employee:"",itemType:"",item:"",price:"",salary:"",amount:"",total:"",discount:"",payOff:"",note:""}),i=(0,c.iH)([{total:0,discount:"",salary_sum:0,sum:0,payOff:"",notPay:0}]),p=()=>{console.log(e.params.plate,e.params.recordDate),b.Z.post("/getRecordDetails",{plate:e.params.plate,recordDate:e.params.recordDate}).then((e=>{n.value=e.data,e.data2.length>0&&(s.employee=e.data2[0].EMPLOYEE,s.discount=e.data2[0].DISCOUNT,s.payOff=e.data2[0].PAYOFF,s.fixType=e.data2[0].FIX_TYPE,s.note=e.data2[0].NOTE),console.log("recordDetails==>"+n.value)})).catch((e=>{console.log(e)}))},h=()=>{b.Z.post("/getFixType",{}).then((async e=>{t.value=e.optType})).catch((e=>{console.log(e)}))},_=e=>{b.Z.post("/getFixItem",{item_type:e}).then((async e=>{r.value=e.optItem})).catch((e=>{console.log(e)}))},W=e=>{s.price=e};(0,o.m0)((()=>{let e=0;n.value&&n.value.forEach((l=>{e+=Number(l.Price)*Number(l.Quantity)}));let l=0;n.value&&n.value.forEach((e=>{l+=Number(e.Salary)})),i.value[0].total=e,i.value[0].salary_sum=l,i.value[0].sum=Number(i.value[0].total)-Number(s.discount)+i.value[0].salary_sum,i.value[0].notPay=Number(i.value[0].sum)-Number(s.payOff)})),(0,o.m0)((()=>{s.total=String(Number(s.price)*Number(s.amount)+Number(s.salary))}));const v=()=>{b.Z.post("/getEmployee",{}).then((e=>{console.log(e),a.value=e.employeeOpt}))};(0,o.bv)((async()=>{await v(),u.value=e.params.type,await p(),await h()}));const k=()=>{},V=(l,a)=>{const o={plate:e.params.plate,recordDate:e.params.recordDate,item:a.Item,price:a.Price,quantity:a.Quantity,salary:a.Salary,dollar:a.Dollar};g.T.confirm("項目==>  "+a.Item,"刪除",{confirmButtonText:"確定",cancelButtonText:"取消"}).then((()=>{b.Z.post("/delRecord",o).then((async e=>{await p()})).catch((e=>{console.log(e)}))})).catch((()=>{console.log("取消刪除==>   "+a.Item)}))},D=e=>{if(console.log("column=>",e),5==e.columnIndex&&Number(e.row.notPay)>0)return"notPay"},C=l=>{l&&l.validate((l=>{if(l){const l={plate:e.params.plate,recordDate:e.params.recordDate,item:s.item,price:s.price,quantity:s.amount,salary:s.salary,dollar:s.total};b.Z.post("/addRecord",l).then((async e=>{await p()})).catch((e=>{console.log(e)}))}}))},T=()=>{const l={plate:e.params.plate,recordDate:e.params.recordDate,employee:s.employee,fixType:s.fixType,note:s.note,discount:s.discount,payOff:s.payOff};b.Z.post("/saveNote",l).then((async e=>{await p()})).catch((e=>{console.log(e)}))};return{handleDelete:V,recordData:n,recordType:u,back:k,form:s,ruleFormRef:l,employeeOpt:a,itemTypeOpt:t,itemOpt:r,recordSum:i,fixTypeOpt:d,Back:y.eJh,Plus:y.v37,Close:y.x8P,Check:y.JrY,cellClass:D,getItem:_,getPrice:W,addRecord:C,saveNote:T,visible:m}}}),_=a(89);const W=(0,_.Z)(h,[["render",p],["__scopeId","data-v-61f204f3"]]);var v=W}}]);
//# sourceMappingURL=about.86da7d16.js.map